<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GRACEFUL17 Knowledge Graph</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <!-- YASGUI CSS -->
    <link href="https://cdn.jsdelivr.net/npm/@triply/yasgui/build/yasgui.min.css" rel="stylesheet" type="text/css" />

    <!-- Font Awesome -->    
    <link rel="stylesheet" href="static/sparnatural/fa/css/all.min.css" />

    <!-- Sparnatural CSS -->
    <link rel="stylesheet" href="static/sparnatural/sparnatural.css">
    
    <!-- This page custom CSS -->
    <link rel="stylesheet" href="static/sparnatural/styles.css">
  </head>
  
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="#">GRACEFUL17 Knowledge Graph</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" 
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <!-- Dropdown für Explore -->
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="exploreDropdown" role="button" data-bs-toggle="dropdown" 
                 aria-expanded="false">
                Explore
              </a>
              <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="exploreDropdown">
                <li>
                  <a class="dropdown-item" href="#" onclick="document.querySelector('spar-natural').loadQuery(window['archives']); return false;">
                    Archives Map
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="#" onclick="document.querySelector('spar-natural').loadQuery(window['regions']); return false;">
                    Institutions per Region
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="#" onclick="document.querySelector('spar-natural').loadQuery(window['benefices']); return false;">
                    Benefices per Region
                  </a>
                </li>
              </ul>
            </li>
            <!-- Weitere Navigationselemente -->
            <li class="nav-item">
              <a class="nav-link" href="#">Code</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Documentation</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    

    <div class="container my-5">
      <h1>Ask Me Anything about Grace!</h1>
      <div class="col-lg-12 px-0">

      <p style="display: none;">Queries are sent to <a href="#" id="displayEndpoint">...</a></p>
        <!-- Export Link -->


      <textarea id="query-json" style="display:none;"></textarea>

      <div class="modal fade" id="exportModal" tabindex="-1" aria-labelledby="jsonModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="jsonModalLabel">Query JSON</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schließen"></button>
                </div>
                <div class="modal-body" style="overflow:hidden;">
                    <textarea class="form-control" rows="20" id="export-json" style="width:100%" readonly></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
      </div>
      
      <div class="modal fade" id="importModal" tabindex="-1" aria-labelledby="jsonModelLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="jsonModelLabel" data-i18n="import.modal.title">Import JSON</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <textarea class="form-control" rows="20" id="import-json" style="width:100%"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="importButton" data-i18n="import.modal.import">Load</button>
                </div>
            </div>
        </div>
    </div>

        <!-- The sparnatural web component with config attributes. -->
        <!-- See http://docs.sparnatural.eu/Javascript-integration.html#html-attributes-reference -->
        <spar-natural 
            src="https://dataria.org/static/sparnatural/config.ttl https://dataria.org/file/results/rdf/ontology/graceful17.ttl"           
            endpoint="https://graph.dhi-roma.it/query"
            lang="en"
            defaultLang="en"
            distinct="true"
            limit="10000"
            maxOr="10"
            maxDepth="10"
            debug="true"
            prefixes="crm:http://www.cidoc-crm.org/cidoc-crm/ schema:http://schema.org/ skos:http://www.w3.org/2004/02/skos/core# g17:https://g17.dhi-roma.it/resources/ grace:https://w3id.org/g17/ontology/ grace_deprecated:https://g17.dhi-roma.it/ontology/ owl:http://www.w3.org/2002/07/owl# xsd:http://www.w3.org/2001/XMLSchema# prov:http://www.w3.org/ns/prov# geosparql:http://www.opengis.net/ont/geosparql# rdf:http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs:http://www.w3.org/2000/01/rdf-schema# sparnatural:http://data.sparna.fr/ontologies/sparnatural-config-core# rico:https://www.ica.org/standards/RiC/ontology# credit:https://credit.niso.org/contributor-roles/ sparnatural_datasource:http://data.sparna.fr/ontologies/sparnatural-config-datasources# sh:http://www.w3.org/ns/shacl# volipi:http://data.sparna.fr/ontologies/volipi# dash:http://datashapes.org/dash# ninox:https://dhi-roma.ninoxdb.de/#/teams/NBTkuKmSGa68zYCD4/database/t4l3rzpnsoua/ g17raw:https://g17.dhi-roma.it/raw/ wd:http://www.wikidata.org/entity/"
        ></spar-natural>

        <span class="btn btn-primary" id="sparql-toggle">Toggle SPARQL query</span>

        <a href="#" id="export" class="btn btn-primary">
          <i class="fas fa-file-export"></i>Export
        </a>
        <a href="#" id="import" class="btn btn-secondary">
            <i id="import-icon" class="fas fa-file-import"></i><span data-i18n="actions.import">Import</span>
        </a>

      </div>
    </div>

    <!-- raw SPARQL query editor, yasQE -->
    <!-- see https://triply.cc/docs/yasgui/ -->
    <div class="container my-5">
      <div id="yasqe" style="display:none; " />
    </div>

    <!-- SPARQL query results display, yasR -->
    <!-- see https://triply.cc/docs/yasgui/ -->
    <div class="container my-5">
      <div id="yasr">
      </div>
    </div>
    <p>Powered by <a href="https://github.com/oxigraph/oxigraph" target="_blank">Oxigraph</a>, <a href="https://sparnatural.eu/" target="_blank">Sparnatural</a>, <a href="https://github.com/epoz/shmarql" target="_blank">SHMARQL</a> and <a href="https://yasgui.triply.cc/" target="_blank">YASGUI</a>. See our <a href="file/results/rdf/ontology/graceful17.ttl" target="_blank">Ontology</a></p>
    
    <!-- Bootstrap JS (maybe in conflict with base.html bootstrap?)-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

    <!-- YASGUI JS -->
    <script src="https://cdn.jsdelivr.net/npm/@triply/yasgui/build/yasgui.min.js"></script>

    <!-- Sparnatural JS -->
    <script src="static/sparnatural/sparnatural.js"></script>

    <!-- Sparnatural Custom YASR plugins -->
    <script src="static/sparnatural/sparnatural-yasgui-plugins.js"></script>

    <!-- Sparnatural Custom YASR plugins 2 
    <script src="static/sparnatural/sparnatural-yasgui-plugins_small.js"></script> -->

    <!-- File containing example queries -->
    <script src="static/sparnatural/example-queries.js"></script>

    <!-- bindings JS -->
    <script src="static/sparnatural/sparnatural-bindings.js"></script> 
    
    <!-- This page custom JS -->
    <script src="static/sparnatural/main.js"></script>

    <script>
      // console.log("Raw c_query from Flask:", "{}");
      window.sparnaturalConfig = {
            c_query: JSON.parse('{}')
        };
  </script>

  </body>
</html>